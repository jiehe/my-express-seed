
    
    <div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div>

<div class="md-section-divider"></div>

<h1 data-anchor-id="5z1o" id="dustjs&#x4E00;&#x4E9B;&#x8BED;&#x6CD5;&#x548C;&#x8E29;&#x7684;&#x5751;">dustjs&#xFF0C;&#x4E00;&#x4E9B;&#x8BED;&#x6CD5;&#x548C;&#x8E29;&#x7684;&#x5751;</h1>

<p data-anchor-id="y7hg"><code>dustjs</code><div id="reader-full-topInfo" class="reader-full-topInfo-shown">
        
        <code><span class="article-updated-date">2015-06-01 07:54:33</span></code>
        <code><span>&#x5B57;&#x6570; </span><span class="article-characters">1654</span></code>
        <code><span>&#x9605;&#x8BFB; </span><span class="article-read">11</span></code>
    </div></p>

<hr>

<p data-anchor-id="p662">Dustjs&#x662F;&#x4E00;&#x4E2A;JS&#x5F02;&#x6B65;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x53EF;&#x7528;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x548C;Node.js&#x73AF;&#x5883;&#x3002;&#x540C;&#x65F6;&#x652F;&#x6301;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x7AEF;&#x6E32;&#x67D3;&#xFF0C;&#x6A21;&#x7248;&#x7F16;&#x8BD1;&#x6210;JS&#x540E;&#x4F7F;&#x7528;&#x3002;<strong>dustjs&#x6027;&#x80FD;&#x9AD8;&#xFF0C;&#x4E2D;&#x6587;&#x6559;&#x7A0B;&#x5C11;&#x3002;</strong></p>

<p data-anchor-id="55gz"><a href="http://blog.sprabbit.com/blog/2013/08/17/introduction-dustjs-2/" target="_blank">&#x4E2D;&#x6587;&#x6559;&#x7A0B;&#x4F20;&#x9001;&#x95E8;</a></p>

<p data-anchor-id="hd08">&#x5728;&#x6B64;&#x8BB0;&#x5F55;&#x4E0B;&#x4E00;&#x4E9B;dustjs&#x7684;&#x8BED;&#x6CD5;&#x3002;</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="mhad"><ol class="linenums"><li class="L0"><code><span class="pun">{#</span><span class="pln">model</span><span class="pun">.</span><span class="pln">prePage</span><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">{</span><span class="lit">@if</span><span class="pln"> cond</span><span class="pun">=</span><span class="str">&quot;&apos;{pageNum}&apos; == &apos;{model.pageNum}&apos; &quot;</span><span class="pun">}</span></code></li><li class="L2"><code><span class="pun">&lt;</span><span class="pln">a </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;prev disabled cantClick&quot;</span><span class="pun">&gt;&lt;</span><span class="pln">i</span><span class="pun">&gt;&lt;</span><span class="str">/i&gt;&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pun">{:</span><span class="kwd">else</span><span class="pun">}</span></code></li><li class="L4"><code><span class="pun">&lt;</span><span class="pln">a href</span><span class="pun">=</span><span class="str">&quot;{href}&quot;</span><span class="pln"> </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;prev disabled&quot;</span><span class="pun">&gt;&lt;</span><span class="pln">i</span><span class="pun">&gt;&lt;</span><span class="str">/i&gt;&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pun">{/</span><span class="kwd">if</span><span class="pun">}</span></code></li><li class="L6"><code><span class="pun">{/</span><span class="pln">model</span><span class="pun">.</span><span class="pln">prePage</span><span class="pun">}</span></code></li></ol></pre>

<div class="md-section-divider"></div>

<h3 data-anchor-id="nzsg" id="&#x904D;&#x5386;&#x8BED;&#x6CD5;">&#x904D;&#x5386;&#x8BED;&#x6CD5;:</h3>

<p data-anchor-id="9vtu"><code>{#model.prePage}{/model.prePage}</code>&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x904D;&#x5386;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x6570;&#x7EC4;&#xFF0C;&#x5F53;&#x662F;&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x8BE5;&#x6807;&#x7B7E;&#x91CC;&#x9762;&#x7528;{key}&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x952E;&#x503C;&#x3002;&#x5F53;&#x662F;&#x6570;&#x7EC4;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x8BE5;&#x6807;&#x7B7E;&#x91CC;&#x9762;&#x7528;{.}&#x83B7;&#x53D6;&#x5230;&#x6570;&#x7EC4;&#x6BCF;&#x4E00;&#x4E2A;&#x503C;&#x3002; <br>
&#x6CE8;&#x610F;&#xFF1A;&#x5728;&#x4E2D;&#x6587;&#x6559;&#x7A0B;&#x4F20;&#x9001;&#x95E8;&#x4E2D;&#x533A;&#x6BB5;&#x63D0;&#x5230;&#x7684;---&#x5BF9;&#x5E94;&#x7684;&#x5C5E;&#x6027;&#x503C;&#x4E00;&#x822C;&#x4E3A;&#x6570;&#x7EC4;&#x6216;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x5C06;&#x88AB;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x6570;&#x7EC4;&#x6765;&#x5BF9;&#x5F85;&#x3002; &#x5E76;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x6CA1;&#x6709;&#x6570;&#x7EC4;&#x7684;<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-7" style="width: 1.937em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.54em; height: 0px; font-size: 126%;"><span style="position: absolute; clip: rect(1.739em 1000.002em 2.879em -0.394em); top: -2.577em; left: 0.002em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-10" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.052em;"></span></span><span class="mi" id="MathJax-Span-11" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.002em;"></span></span><span class="mo" id="MathJax-Span-12" style="font-family: STIXGeneral-Regular;">,</span></span><span style="display: inline-block; width: 0px; height: 2.582em;"></span></span></span><span style="border-left-width: 0.003em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.191em; vertical-align: -0.247em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">idx,</script>len &#x7B49;&#x5C5E;&#x6027;</p>

<div class="md-section-divider"></div>

<h3 data-anchor-id="8m7a" id="&#x5224;&#x65AD;&#x8BED;&#x6CD5;">&#x5224;&#x65AD;&#x8BED;&#x6CD5;&#xFF1A;</h3>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="inqp"><ol class="linenums"><li class="L0"><code><span class="pun">{</span><span class="lit">@if</span><span class="pln"> cond</span><span class="pun">=</span><span class="str">&quot;&apos;{pageNum}&apos; == &apos;{model.pageNum}&apos; &quot;</span><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">&lt;</span><span class="pln">a </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;prev disabled cantClick&quot;</span><span class="pun">&gt;&lt;</span><span class="pln">i</span><span class="pun">&gt;&lt;</span><span class="str">/i&gt;&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pun">{:</span><span class="kwd">else</span><span class="pun">}</span></code></li><li class="L3"><code><span class="pun">&lt;</span><span class="pln">a href</span><span class="pun">=</span><span class="str">&quot;{href}&quot;</span><span class="pln"> </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;prev disabled&quot;</span><span class="pun">&gt;&lt;</span><span class="pln">i</span><span class="pun">&gt;&lt;</span><span class="str">/i&gt;&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pun">{/</span><span class="kwd">if</span><span class="pun">}</span></code></li></ol></pre>

<p data-anchor-id="1myy">&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x4E2A;&#x5751;&#xFF0C;&#x5C31;&#x662F;cond=&quot;&quot;&#x6761;&#x4EF6;&#x8981;&#x7528;&#x201C;&#x201D;&#x53CC;&#x5F15;&#x53F7;&#x3002;&#x6761;&#x4EF6;&#x91CC;&#x9762;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x662F;{$key}&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x4E5F;&#x8981;&#x7528;&#x5355;&#x5F15;&#x53F7;&#x5305;&#x88F9;&#x8D77;&#x6765;&#x3002;&#x9664;&#x975E;&#x662F;{key}&#x662F;&#x6570;&#x5B57;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528; {@if cond=&quot;{key}&gt;5&quot;} &#x8FDB;&#x884C;&#x5224;&#x65AD;&#x3002;</p>

<div class="md-section-divider"></div>

<h3 data-anchor-id="zzm3" id="idx">$idx</h3>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="dcbb"><ol class="linenums"><li class="L0"><code><span class="pun">{#</span><span class="pln">photoSArr</span><span class="pun">}</span></code></li><li class="L1"><code><span class="str">&lt;li&gt;</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">&lt;a&gt;</span></code></li><li class="L3"><code><span class="pln">        </span><span class="pun">{</span><span class="pln">$idx</span><span class="pun">}&lt;</span><span class="pln">img big</span><span class="pun">-</span><span class="pln">url</span><span class="pun">=</span><span class="str">&quot;{photoLArr[$idx]}&quot;</span><span class="pln"> src</span><span class="pun">=</span><span class="str">&quot;{.}&quot;</span><span class="pln"> width</span><span class="pun">=</span><span class="str">&quot;38&quot;</span><span class="pln"> height</span><span class="pun">=</span><span class="str">&quot;38&quot;</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pun">&lt;/</span><span class="pln">li</span><span class="pun">&gt;</span></code></li><li class="L6"><code><span class="pun">{/</span><span class="pln">photoSArr</span><span class="pun">}</span></code></li></ol></pre>

<p data-anchor-id="ol0n">&#x53EF;&#x4EE5;&#x901A;&#x8FC7;$idx &#x83B7;&#x53D6;&#x5230;&#x6570;&#x7EC4;&#x7684;&#x4E0B;&#x6807;&#x3002;&#x53EF;&#x4EE5;&#x5728;{key}&#x82B1;&#x62EC;&#x53F7;&#x91CC;&#x9762;&#x76F4;&#x63A5;&#x5F15;&#x7528;<code>{photoLArr[$idx]}</code>; &#x6216;&#x8005;&#x5B83;&#x81EA;&#x5DF1;&#x72EC;&#x7ACB;&#x4F7F;&#x7528;<code>{$idx}</code>&#x3002;&#x8981;&#x53D6;&#x6570;&#x7EC4;&#x7684;&#x6BCF;&#x4E00;&#x9879;&#xFF0C;&#x7528;{.}</p>

<div class="md-section-divider"></div>

<h3 data-anchor-id="qf2t" id="len">$len</h3>

<p data-anchor-id="jky3">{$len}&#x83B7;&#x53D6;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x3002;</p>

<p data-anchor-id="fchm">&#x901A;&#x8FC7;&#x904D;&#x5386;&#x8BED;&#x6CD5;&#x3001;&#x5224;&#x65AD;&#x8BED;&#x6CD5;&#x3001;&#x548C;&#x4E0B;&#x6807;&#x5C31;&#x80FD;&#x6EE1;&#x8DB3;&#x6A21;&#x677F;&#x7684;&#x4F7F;&#x7528;&#x4E86;&#x3002;&#x66F4;&#x591A;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5E94;&#x8BE5;&#x5FC5;&#x987B;&#x5728;model&#x91CC;&#x9762;&#x5904;&#x7406;&#x597D;</p>

<div class="md-section-divider"></div>

<h3 data-anchor-id="el6d" id="if-else">if else</h3>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="iuro"><ol class="linenums"><li class="L0"><code><span class="pun">{</span><span class="lit">@eq</span><span class="pln"> key</span><span class="pun">=</span><span class="pln">level value</span><span class="pun">=</span><span class="str">&quot;master&quot;</span><span class="pun">}</span></code></li><li class="L1"><code><span class="pln">  </span><span class="typ">You</span><span class="pln"> are </span><span class="kwd">no</span><span class="pln"> longer a </span><span class="typ">Padawan</span><span class="pun">.</span></code></li><li class="L2"><code><span class="pun">{:</span><span class="kwd">else</span><span class="pun">}</span></code></li><li class="L3"><code><span class="pln">  </span><span class="typ">You</span><span class="pln"> have much to learn</span><span class="pun">,</span><span class="pln"> young </span><span class="typ">Padawan</span><span class="pun">.</span></code></li><li class="L4"><code><span class="pun">{/</span><span class="pln">eq</span><span class="pun">}</span></code></li></ol></pre>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="r42o"><ol class="linenums"><li class="L0"><code><span class="pun">{</span><span class="lit">@gt</span><span class="pln"> key</span><span class="pun">=</span><span class="lit">20</span><span class="pln"> value</span><span class="pun">=</span><span class="lit">25</span><span class="pun">}</span></code></li><li class="L1"><code><span class="pln">  </span><span class="typ">You</span><span class="pln"> are </span><span class="kwd">no</span><span class="pln"> longer a </span><span class="typ">Padawan</span><span class="pun">.</span></code></li><li class="L2"><code><span class="pun">{:</span><span class="kwd">else</span><span class="pun">}</span></code></li><li class="L3"><code><span class="pln">  </span><span class="typ">You</span><span class="pln"> have much to learn</span><span class="pun">,</span><span class="pln"> young </span><span class="typ">Padawan</span><span class="pun">.</span></code></li><li class="L4"><code><span class="pun">{/</span><span class="pln">gt</span><span class="pun">}</span></code></li></ol></pre>

<div class="md-section-divider"></div>

<h3 data-anchor-id="ncfu" id="&#x52A0;&#x6CD5;">&#x52A0;&#x6CD5;</h3>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="c85i"><ol class="linenums"><li class="L0"><code><span class="pun">{</span><span class="lit">@math</span><span class="pln"> key</span><span class="pun">=</span><span class="str">&quot;{$idx}&quot;</span><span class="pln"> method</span><span class="pun">=</span><span class="str">&quot;add&quot;</span><span class="pln"> operand</span><span class="pun">=</span><span class="str">&quot;1&quot;</span><span class="pun">/}</span></code></li></ol></pre>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="zvkw"><ol class="linenums"><li class="L0"><code><span class="pun">{#</span><span class="pln">carousel</span><span class="pun">}</span></code></li><li class="L1"><code><span class="pln">      </span><span class="pun">&lt;</span><span class="pln">li data</span><span class="pun">-</span><span class="pln">target</span><span class="pun">=</span><span class="str">&quot;#carousel-example-generic&quot;</span><span class="pln"> data</span><span class="pun">-</span><span class="pln">slide</span><span class="pun">-</span><span class="pln">to</span><span class="pun">=</span><span class="str">&quot;{$idx}&quot;</span><span class="pln"> </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;{@eq key=$idx value=0}active{/eq}&quot;</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pln">        </span><span class="pun">{</span><span class="lit">@math</span><span class="pln"> key</span><span class="pun">=</span><span class="str">&quot;{$idx}&quot;</span><span class="pln"> method</span><span class="pun">=</span><span class="str">&quot;add&quot;</span><span class="pln"> operand</span><span class="pun">=</span><span class="str">&quot;1&quot;</span><span class="pun">/}</span></code></li><li class="L3"><code><span class="pln">      </span><span class="pun">&lt;/</span><span class="pln">li</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">      </span><span class="pun">{/</span><span class="pln">carousel</span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">ol</span><span class="pun">&gt;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="pun">&lt;</span><span class="pln">div </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;carousel-inner&quot;</span><span class="pln"> role</span><span class="pun">=</span><span class="str">&quot;listbox&quot;</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">      </span><span class="pun">{#</span><span class="pln">carousel</span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">      </span><span class="pun">&lt;</span><span class="pln">div </span><span class="kwd">class</span><span class="pun">=</span><span class="str">&quot;item {@eq key=$idx value=0}active{/eq}&quot;</span><span class="pun">&gt;</span></code></li><li class="L9"><code><span class="pln">        </span><span class="pun">&lt;</span><span class="pln">a href</span><span class="pun">=</span><span class="str">&quot;{href}&quot;</span><span class="pln"> title</span><span class="pun">=</span><span class="str">&quot;{alt}&quot;</span><span class="pun">&gt;</span></code></li><li class="L0"><code><span class="pln">          </span><span class="pun">&lt;</span><span class="pln">img src</span><span class="pun">=</span><span class="str">&quot;{imageName}&quot;</span><span class="pln"> alt</span><span class="pun">=</span><span class="str">&quot;{alt}&quot;</span><span class="pln"> data</span><span class="pun">-</span><span class="pln">holder</span><span class="pun">-</span><span class="pln">rendered</span><span class="pun">=</span><span class="str">&quot;true&quot;</span><span class="pln"> width</span><span class="pun">=</span><span class="str">&quot;730&quot;</span><span class="pln"> height</span><span class="pun">=</span><span class="str">&quot;400&quot;</span><span class="pun">/&gt;</span></code></li><li class="L1"><code><span class="pln">        </span><span class="pun">&lt;/</span><span class="pln">a</span><span class="pun">&gt;</span></code></li><li class="L2"><code><span class="pln">      </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span></code></li><li class="L3"><code><span class="pln">      </span><span class="pun">{/</span><span class="pln">carousel</span><span class="pun">}</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">&lt;/</span><span class="pln">div</span><span class="pun">&gt;</span></code></li></ol></pre></div>
    <div class="remark-icons">
    </div>
